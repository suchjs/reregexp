!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);window.RegexpParser=r.default},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){return Math.random()>=.5},a=function(e,t){return e===t?e:e+Math.floor(Math.random()*(t+1-e))},s=function(e){return e[e.length-1]},l=function(){function e(){}return e.charsetOfAll=function(){return e.charsetOfNegated("ALL")},e.charsetOfDotall=function(){return e.charsetOfNegated("DOTALL")},e.charsetOfNegated=function(t){var n=e.points,r=e.cache;if(r[t])return r[t];var i=0,o=[],u=[],a=0,l=function(e,t){var n=t-e+1;n<=0||(1===n?o.push([e]):o.push([e,t]),a+=n,u.push(a))};if("DOTALL"===t)l(i,56319),l(57344,65535);else{for(var p="ALL"===t?[[10],[13],[8232,8233]]:n[t.toLowerCase()],c="S"===t?1:0;i<=56319&&p.length>c;){var h=p.shift(),f=h[0],g=h[1];l(i,f-1),i=(g||f)+1}if(i<56319&&l(i,56319),"S"===t){var d=s(p)[0];l(57344,d-1),l(d+1,65535)}else l(57344,65535)}return r[t]={ranges:o,totals:u}},e.charsetOf=function(t){var n=e.lens;return{ranges:e.points[t],totals:n[t]}},e.getCharsetInfo=function(t,n){var r,i;void 0===n&&(n={});var o=e;return["w","d","s"].indexOf(t)>-1?i=o.charsetOf(t):(r="."===t?n.s?o.charsetOfDotall():o.charsetOfAll():o.charsetOfNegated(t),n.u&&(i.ranges=r.ranges.slice(0).concat([o.bigCharPoint]),i.totals=r.totals.slice(0).concat(o.bigCharTotal))),i||r},e.make=function(t,n){return void 0===n&&(n={}),e.makeOne(e.getCharsetInfo(t,n))},e.makeOne=function(e){for(var t,n=e.totals,r=e.ranges,i=s(n),o=a(1,i),u=n.length,l=0;u>1;){var p=Math.floor(u/2),c=n[l+p-1],h=n[l+p];if(o>=c&&o<=h){l+=p-(o===c?1:0);break}o>h?(l+=p+1,u-=p+1):u-=p}return t=r[l][0]+(o-(n[l-1]||0))-1,String.fromCodePoint(t)},e.points={d:[[48,57]],w:[[48,57],[65,90],[95],[97,122]],s:[[9,12],[32],[160],[5760],[6158],[8192,8202],[8232,8233],[8239],[8287],[12288],[65279]]},e.lens={d:[10],w:[10,36,37,63],s:[4,5,6,7,8,18,20,21,22,23,24]},e.bigCharPoint=[65536,1114111],e.bigCharTotal=1048576,e.cache={},e}(),p={beginWith:"^",endWith:"$",matchAny:".",groupBegin:"(",groupEnd:")",uncapture:"?:",lookahead:"?=",lookaheadNot:"?!",groupSplitor:"|",setBegin:"[",setEnd:"]",rangeSplitor:"-",multipleBegin:"{",multipleEnd:"}",multipleSplitor:",",translate:"\\",leastOne:"+",multiple:"*",optional:"?",setNotIn:"^",delimiter:"/"},c={i:1,u:2,s:4,g:8,m:16,y:32},h=Object.keys(c).join("");t.parserRule=new RegExp("^/(?:\\\\.|[^\\\\](?!/)|[^\\\\])+?/["+h+"]*"),t.regexpRule=new RegExp("^/((?:\\\\.|[^\\\\](?!/)|[^\\\\])+?)/(["+h+"]*)$");var f=function(){function e(e,n){if(void 0===n&&(n={}),this.rule=e,this.config=n,this.context="",this.flags=[],this.lastRule="",this.queues=[],this.ruleInput="",this.flagsHash={},this.totalFlagBinary=0,this.rootQueues=[],this.hasLookaround=!1,this.hasNullRoot=null,!t.regexpRule.test(e))throw new Error("wrong regexp:"+e);this.rule=e,this.context=RegExp.$1,this.flags=RegExp.$2?RegExp.$2.split(""):[],this.checkFlags(),this.parse(),this.lastRule=this.ruleInput}return e.prototype.setConfig=function(e){this.config=e},e.prototype.build=function(){if(this.hasLookaround)throw new Error("the build method does not support lookarounds.");var e=new Error("the regexp has null expression,will match nothing");if(!0===this.hasNullRoot)throw e;var t=this.rootQueues,n=o({},this.config,{flags:this.flagsHash,namedGroupData:{},captureGroupData:{},beginWiths:[],endWiths:[]}),r=t.reduce(function(e,t){return e+t.build(n)},"");if(null===this.hasNullRoot){if(t.filter(function(e){return e.isMatchNothing}).length)throw this.hasNullRoot=!0,e;this.hasNullRoot=!1}return r},e.prototype.info=function(){var e=this;return{rule:e.rule,context:e.context,lastRule:e.lastRule,flags:e.flags,queues:e.queues}},e.prototype.parse=function(){for(var e=this.context,t=p,n=0,r=e.length,i=[new O],o=[],u=[],a=[],l={},c={},h=/^(\?(?:<(.+?)>|:))/,f=/^(\?(?:<=|<!|=|!))/,g=this.hasFlag("u"),d=[],v=[],j=0,B=null,D=null,W=function(e){if(o.length||u.length){var t=d.length&&"group"===s(d).type||o.length>0,n=s(t?o:u);t?n.addItem(e):e.parent=n}},H=function(e,t){return["groupBegin","groupSplitor","times","begin","anchor"].indexOf(e)>-1||"charset"===e&&"b"===t.charset.toLowerCase()};n<r;){var U=e.charAt(n++);if((D||B)&&["[","(",")","|","*","?","+","{",".","}","^","$","/"].indexOf(U)>-1){var z=new A(U);D?(z.parent=D,D=null):z.parent=B,i.push(z)}else{var Z=e.slice(n),J=s(o),K=s(i),V=null,X=null;switch(U){case t.translate:var Y=e.charAt(n++),ee=U+Y;if("u"===Y||"x"===Y){var te=(V="x"===Y?new L:g?new G:new T).untilEnd(e.slice(n));if(0===te){if(g)throw new Error("invalid unicode code point:"+e);V=new I("\\"+Y)}else n+=te}else if("c"===Y){var ne=e.charAt(n);if(g){if(!/[a-zA-Z]/.test(ne))throw new Error("invalid unicode escape,unexpect control character["+n+"]:\\c"+ne);V=new E(ne),n++}else/\w/.test(ne)?(V=new E(ne),n++):(V=new A("\\"),n--)}else if(["d","D","w","W","s","S","b","B"].indexOf(Y)>-1)V=new P(ee);else if(["t","r","n","f","v"].indexOf(Y)>-1)V=new C(ee);else if(/^(\d+)/.test(Z)){var re=RegExp.$1;if(B)if(/^(0[0-7]{0,2}|[1-3][0-7]{0,2}|[4-7][0-7]?)/.test(re)){var ie=RegExp.$1;V=new q("\\"+ie),n+=ie.length-1}else V=new N("\\"+re.charAt(0));else if("0"===re.charAt(0))if(1===re.length)V=new R;else if(+re.charAt(1)>7)V=new R;else{ie=re.length>=3&&+re.charAt(2)<=7?re.slice(1,2):re.charAt(1);V=new q("\\0"+ie),n+=ie.length}else if(n+=re.length-1,+re<=a.length){V=new y("\\"+re);var oe=a[+re-1];c[re]=oe,oe.isAncestorOf(J)?V.ref=null:V.ref=oe}else V=new S("\\"+re),v.push(V)}else if("k"===Y&&/^<([^>]+?)>/.test(e.slice(n))){var ue=RegExp.$1;if(!l[ue])throw new Error("Invalid named capture referenced:"+ue);n+=ue.length+2;oe=l[ue];V=new y("\\"+oe.captureIndex,ue),oe.isAncestorOf(J)?V.ref=null:V.ref=oe}else V=new N(ee);break;case t.groupBegin:var ae=f.test(Z);if(ae){var se=RegExp.$1;V=new b(se),X=new m("lookaroundBegin"),this.hasLookaround=!0,n+=se.length}else V=new Q,X=new m("groupBegin");if(d.push(V),!ae){if(V=V,h.test(Z)){var le=RegExp.$1,pe=RegExp.$2;"?:"===le||(V.captureIndex=++j,V.captureName=pe,l[pe]=V),n+=le.length}else V.captureIndex=++j;V.captureIndex>0&&a.push(V)}break;case t.groupEnd:if(!d.length)throw new Error("unmatched "+U+',you mean "\\'+U+'"?');var ce=d.pop();if(!ce||["group","lookaround"].indexOf(ce.type)<0)throw new Error("unexpected capture end.");var he=("group"===ce.type?o:u).pop();he&&(he.isComplete=!0,(X=new m(ce.type+"End")).parent=he);break;case t.groupSplitor:var fe=s(o);if(fe)fe.addNewGroup();else{var ge=new Q;ge.isRoot=!0,ge.addRootItem(i.slice(1)),i.splice(1,0,ge),o.push(ge)}X=new m("groupSplitor");break;case t.setBegin:/^\\b]/.test(Z)?(V=new x,n+=3):(B=new F,"^"===Z.charAt(0)&&(B.reverse=!0,n+=1),i.push(B),W(B),(X=new m("setBegin")).parent=B);break;case t.setEnd:B?(B.isComplete=!0,(X=new m("setEnd")).parent=B,B=null):V=new A(U);break;case t.rangeSplitor:if(B)if(K.codePoint<0)V=new A(U);else Z.charAt(0)===t.setEnd?(B.isComplete=!0,B=null,n+=1):(B.pop(),(D=new _).parent=B,i.pop().parent=D,i.push(D,K),(X=new m("rangeSplitor")).parent=D);else V=new A(U);break;case t.multipleBegin:case t.optional:case t.multiple:case t.leastOne:var de=(V=U===t.multipleBegin?new M:new $).untilEnd(e.slice(n-1));if(de>0){var ve=K.special||K.type,ye="["+K.input+"]nothing to repeat[index:"+n+"]:"+e.slice(n-1,n-1+de);if(H(ve,K))throw new Error(ye);n+=de-1,V.target="groupEnd"===ve||"setEnd"===ve?K.parent:K}else V=new A(U);break;case t.matchAny:V=new w;break;case t.beginWith:case t.endWith:V=new k(U);break;case t.delimiter:throw new Error('unexpected pattern end delimiter:"/'+Z+'"');default:V=new A(U)}if(V){var me=V;if(i.push(me),D){if(V.codePoint<0){var be=i.splice(-4,4),we=(be[0],be[1]),Re=(be[2],be[3]),xe=new A("-");B.pop(),[we,xe,Re].map(function(e){return e.parent=B,i.push(e),e})}else V.parent=D;D=null}else B?me.parent=B:W(me);if(["group","lookaround"].indexOf(me.type)>-1)("group"===me.type?o:u).push(me)}X&&(V&&(X.parent=V),i.push(X))}}if(v.length){var Oe=function(e,t,n){for(var r=0,i=!1,o=e.length;r<o;r++)if(t===e[r]){i=!0;break}i&&e.splice.apply(e,[r,1].concat(n))},Ee=a.length;v.map(function(e){var t,n=e.input.slice(1),r=n.length,o=0;if(+n<=Ee)(t=new y(e.input)).ref=null,o=r;else if(/^([1-3][0-7]{0,2}|[4-7][0-7]?)/.test(n)){var u=RegExp.$1;t=new q("\\"+u),o+=u.length}else t=new N("\\"+n.charAt(0)),o+=1;t.linkParent=e.parent;for(var a=[t];o<r;){var s=new A(n.charAt(o++));s.linkParent=e.parent,a.push(s)}e.parent&&Oe(e.parent.queues,e,a),Oe(i,e,a)})}i.length>1&&"group"===i[1].type&&!0===i[1].isRoot&&(i[1].isComplete=!0);var Pe=[],Ce="";i.every(function(e){if(!e.isComplete)throw new Error("the regexp segment "+e.type+" is not completed:"+e.input);return null===e.parent&&(Pe.push(e),Ce+=e.getRuleInput()),!0}),this.ruleInput=Ce,this.rootQueues=Pe,this.queues=i},e.prototype.checkFlags=function(){var e,t=this.flags,n=t.length;if(0!==n){if(n>Object.keys(c).length)throw new Error("the rule has repeat flag,please check.");for(var r=t[0],i=c[r],o=((e={})[r]=!0,e),u=1,a=t.length;u<a;u++){var s=t[u],l=c[s];if(0!=(i&l))throw new Error("wrong flag["+u+"]:"+s);i+=l,o[s]=!0}this.flagsHash=o,this.totalFlagBinary=i,(o.y||o.m||o.g)&&console.warn("the flags of 'g','m','y' will ignore,but you can set flags such as 'i','u','s'")}},e.prototype.hasFlag=function(e){var t=this.totalFlagBinary,n=c[e];return n&&0!=(n&t)},e}();t.default=f;var g=function(){function e(e){void 0===e&&(e=""),this.input=e,this.queues=[],this.codePoint=-1,this.min=1,this.max=1,this.dataConf={},this.buildForTimes=!1,this.curParent=null,this.matchNothing=!1,this.completed=!0}return Object.defineProperty(e.prototype,"parent",{get:function(){return this.curParent},set:function(e){this.curParent=e,"special"!==this.type&&e.add(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkParent",{set:function(e){this.curParent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMatchNothing",{get:function(){return this.matchNothing},set:function(e){this.matchNothing=e,this.parent&&(this.parent.isMatchNothing=e)},enumerable:!0,configurable:!0}),e.prototype.setRange=function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})},e.prototype.add=function(e){this.queues=this.queues.concat(e)},e.prototype.pop=function(){return this.queues.pop()},e.prototype.build=function(e){var t=this,n=this.min,r=this.max,i="";if(0===n&&0===r);else{var o=n+Math.floor(Math.random()*(r-n+1));if(0!==o){var a=function(){var n=t.prebuild(e);return e.flags&&e.flags.i&&(n=u()?u()?n.toLowerCase():n.toUpperCase():n),n};if(this.buildForTimes)for(;o--;)i+=a();else i=a().repeat(o)}}return this.dataConf=e,this.setDataConf(e,i),i},e.prototype.setDataConf=function(e,t){},e.prototype.toString=function(){return this.input},e.prototype.untilEnd=function(e){},e.prototype.isAncestorOf=function(e){do{if(e===this)return!0}while(e=e?e.parent:null);return!1},e.prototype.getRuleInput=function(e){return this.queues.length?this.buildRuleInputFromQueues():this.input},e.prototype.buildRuleInputFromQueues=function(){return this.queues.reduce(function(e,t){return e+t.getRuleInput()},"")},e.prototype.prebuild=function(e){return this.queues.length?this.queues.reduce(function(t,n){return t+n.build(e)},""):""},e}();t.RegexpPart=g;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.min=0,n.max=0,n}return i(t,e),t}(g);t.RegexpEmpty=d;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.prebuild=function(){return this.input},t}(g);t.RegexpOrigin=v;var y=function(e){function t(t,n){void 0===n&&(n="");var r=e.call(this,t)||this;return r.name=n,r.type="reference",r.ref=null,r.index=Number(""+t.slice(1)),r}return i(t,e),t.prototype.prebuild=function(e){var t=this.ref;if(null===t)return"";var n=t.captureIndex;return e.captureGroupData[n]},t}(g);t.RegexpReference=y;var m=function(e){function t(t){var n=e.call(this)||this;return n.special=t,n.type="special",n}return i(t,e),t}(d);t.RegexpSpecial=m;var b=function(e){function t(t){var n=e.call(this)||this;return n.type="lookaround",n.looktype=t,n.isComplete=!1,n}return i(t,e),t.prototype.getRuleInput=function(){return"("+this.looktype+this.buildRuleInputFromQueues()+")"},t}(d);t.RegexpLookaround=b;var w=function(e){function t(){var t=e.call(this,".")||this;return t.type="any",t.buildForTimes=!0,t}return i(t,e),t.prototype.prebuild=function(e){return l.make(".",e.flags)},t}(g);t.RegexpAny=w;var R=function(e){function t(){var t=e.call(this,"\\0")||this;return t.type="null",t}return i(t,e),t.prototype.prebuild=function(){return"\0"},t}(g);t.RegexpNull=R;var x=function(e){function t(){var t=e.call(this,"[\\b]")||this;return t.type="backspace",t}return i(t,e),t.prototype.prebuild=function(){return"\b"},t}(g);t.RegexpBackspace=x;var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="begin",t}return i(t,e),t}(d);t.RegexpBegin=O;var E=function(e){function t(t){var n=e.call(this,"\\c"+t)||this;return n.type="control",n.codePoint=parseInt(t.charCodeAt(0).toString(2).slice(-5),2),n}return i(t,e),t.prototype.prebuild=function(){return String.fromCharCode(this.codePoint)},t}(g);t.RegexpControl=E;var P=function(e){function t(t){var n=e.call(this,t)||this;return n.type="charset",n.charset=n.input.slice(-1),n.buildForTimes=!0,n}return i(t,e),t.prototype.prebuild=function(e){var t=this.charset;return"b"===t||"B"===t?(console.warn("please do not use \\b or \\B"),""):l.make(t,e.flags)},t}(g);t.RegexpCharset=P;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="print",t}return i(t,e),t.prototype.prebuild=function(){return this.input},t}(g);t.RegexpPrint=C;var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ignore",t}return i(t,e),t}(d);t.RegexpIgnore=I;var k=function(e){function t(t){var n=e.call(this,t)||this;return n.type="anchor",n.anchor=t,console.warn('the anchor of "'+n.input+'" will ignore.'),n}return i(t,e),t}(d);t.RegexpAnchor=k;var A=function(e){function t(t){var n=e.call(this,t)||this;return n.type="char",n.codePoint=t.codePointAt(0),n}return i(t,e),t}(v);t.RegexpChar=A;var N=function(e){function t(t){var n=e.call(this,t)||this;return n.type="translate",n.codePoint=t.slice(-1).codePointAt(0),n}return i(t,e),t.prototype.prebuild=function(){return this.input.slice(-1)},t}(v);t.RegexpTranslateChar=N;var q=function(e){function t(t){var n=e.call(this,t)||this;return n.type="octal",n.codePoint=Number("0o"+t.slice(1)),n}return i(t,e),t.prototype.prebuild=function(){return String.fromCodePoint(this.codePoint)},t}(g);t.RegexpOctal=q;var S=function(e){function t(t){var n=e.call(this,t)||this;return n.type="refornumber",n}return i(t,e),t.prototype.prebuild=function(){throw new Error('the "'+this.input+'" must parse again,either reference or number')},t}(g);t.RegexpRefOrNumber=S;var j=function(e){function t(){var t=e.call(this)||this;return t.type="times",t.maxNum=5,t.greedy=!0,t.minRepeat=0,t.maxRepeat=0,t.isComplete=!1,t}return i(t,e),Object.defineProperty(t.prototype,"target",{set:function(e){e.setRange({min:this.minRepeat,max:this.maxRepeat})},enumerable:!0,configurable:!0}),t.prototype.untilEnd=function(e){if(this.rule.test(e)){var t=RegExp.$1;return this.isComplete=!0,this.input=t,this.parse(),t.length}return 0},t}(g);t.RegexpTimes=j;var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^(\{(\d+)(,(\d*))?}(\??))/,t}return i(t,e),t.prototype.parse=function(){var e=RegExp.$2,t=RegExp.$3,n=RegExp.$4,r=RegExp.$5;this.greedy="?"!==r,this.minRepeat=parseInt(e,10),this.maxRepeat=Number(n)?parseInt(n,10):t?this.minRepeat+2*this.maxNum:this.minRepeat},t}(j);t.RegexpTimesMulti=M;var $=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^(\*\?|\+\?|\?\?|\*|\+|\?)/,t}return i(t,e),t.prototype.parse=function(){var e=RegExp.$1;switch(this.greedy=1===e.length,e.charAt(0)){case"*":this.maxRepeat=this.maxNum;break;case"+":this.minRepeat=1,this.maxRepeat=this.maxNum;break;case"?":this.maxRepeat=1}},t}(j);t.RegexpTimesQuantifiers=$;var F=function(e){function t(){var t=e.call(this)||this;return t.type="set",t.reverse=!1,t.isMatchAnything=!1,t.codePointResult=null,t.isComplete=!1,t.buildForTimes=!0,t}return i(t,e),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e,!0===e&&0===this.queues.length&&(this.reverse?this.isMatchAnything=!0:this.isMatchNothing=!0)},enumerable:!0,configurable:!0}),t.prototype.isSetStart=function(){return 0===this.queues.length},t.prototype.getRuleInput=function(){return"["+(this.reverse?"^":"")+this.buildRuleInputFromQueues()+"]"},t.prototype.prebuild=function(e){var t=this.queues,n=a(0,t.length-1);if(this.isMatchAnything)return(new w).build(e);if(this.matchNothing)return console.warn("the empty set will match nothing:[]"),"";if(this.reverse){if(!this.codePointResult)if(1===t.length&&"charset"===t[0].type&&["w","s","d"].indexOf(t[0].charset.toLowerCase())>-1){var r=32^t[0].charset.charCodeAt(0),i=String.fromCharCode(r);this.codePointResult=l.getCharsetInfo(i,e.flags)}else{var o=t.reduce(function(t,n){var r,i=n.type;if("charset"===i){var o=n.charset;"b"===o||"B"===o?(console.warn("the charset \\b or \\B will ignore"),r=[]):r=l.getCharsetInfo(o,e.flags).ranges}else r="range"===i?[n.queues.map(function(e){return e.codePoint})]:[[n.codePoint]];return t.concat(r)},[]);o.push([55296,57343],e.flags.u?[1114112]:[65536]),o.sort(function(e,t){return t[0]>e[0]?-1:t[0]===e[0]?t[1]>e[1]?1:-1:1});for(var u=[],s=0,p=0,c=o.length;p<c;p++){var h=o[p],f=h[0],g=h[1]||f;s<f&&u.push(s+1===f?[s]:[s,f-1]),s=Math.max(g+1,s)}if(0===u.length)this.isMatchNothing=!0;else{var d=0,v=u.map(function(e){return 1===e.length?d+=1:d+=e[1]-e[0]+1,d});this.codePointResult={totals:v,ranges:u}}}return this.isMatchNothing?(console.error("the rule is match nothing"),""):l.makeOne(this.codePointResult)}return this.queues[n].build(e)},t}(g);t.RegexpSet=F;var _=function(e){function t(){var t=e.call(this)||this;return t.type="range",t.isComplete=!1,t}return i(t,e),t.prototype.add=function(t){if(e.prototype.add.call(this,t),2===this.queues.length){this.isComplete=!0;var n=this.queues,r=n[0],i=n[1];if(r.codePoint>i.codePoint)throw new Error("invalid range:"+r.getRuleInput()+"-"+i.getRuleInput())}},t.prototype.getRuleInput=function(){var e=this.queues,t=e[0],n=e[1];return t.getRuleInput()+"-"+n.getRuleInput()},t.prototype.prebuild=function(){var e=this.queues,t=e[0],n=e[1],r=t.codePoint,i=n.codePoint;return String.fromCodePoint(a(r,i))},t}(g);t.RegexpRange=_;var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="hexcode",t}return i(t,e),t.prototype.untilEnd=function(e){var t=this.rule,n=this.codeType;if(t.test(e)){var r=RegExp.$1,i=RegExp.$2||r;if(this.codePoint=Number("0x"+i),this.codePoint>1114111)throw new Error("invalid unicode code point:\\u{"+i+"},can not great than 0x10ffff");this.input="\\"+n+r}return 0},t}(v);t.RegexpHexCode=B;var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^([0-9A-Fa-f]{4})/,t.codeType="u",t}return i(t,e),t}(B);t.RegexpUnicode=T;var G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^({(0*[0-9A-Fa-f]{1,6})}|[0-9A-Fa-f]{4})/,t.codeType="u",t}return i(t,e),t}(B);t.RegexpUnicodeAll=G;var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^([0-9A-Fa-f]{2})/,t.codeType="x",t}return i(t,e),t}(B);t.RegexpASCII=L;var D=function(e){function t(t){var n=e.call(this)||this;return n.index=t,n.type="group-item",n}return i(t,e),t.prototype.getRuleInput=function(e){var t=this;return void 0===e&&(e=!1),this.queues.reduce(function(n,r){return n+(e&&"reference"===r.type&&null!==r.ref?r.ref.getRuleInput(e):t.isEndLimitChar(r)?"":r.getRuleInput(e))},"")},t.prototype.prebuild=function(e){var t=this;return this.queues.reduce(function(n,r){var i;return t.isEndLimitChar(r)?(console.warn("the ^ and $ of the regexp will ignore"),i=""):i=r.build(e),n+i},"")},t.prototype.isEndLimitChar=function(e){return"char"===e.type&&("^"===e.input||"$"===e.input)},t}(g);t.RegexpGroupItem=D;var Q=function(e){function t(){var t=e.call(this)||this;return t.type="group",t.captureIndex=0,t.captureName="",t.queues=[],t.isRoot=!1,t.curGroupItem=null,t.curRule=null,t.isComplete=!1,t.buildForTimes=!0,t.addNewGroup(),t}return i(t,e),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e,!0===e&&(this.isMatchNothing=this.queues.every(function(e){return e.isMatchNothing}))},enumerable:!0,configurable:!0}),t.prototype.getCurGroupItem=function(){return this.curGroupItem},t.prototype.addNewGroup=function(){var e=this.queues,t=new D(e.length);return this.curGroupItem=t,t.parent=this,t},t.prototype.addRootItem=function(e){var t=this;e.map(function(e){null===e.parent&&(e.parent=t.curGroupItem)}),this.addNewGroup()},t.prototype.addItem=function(e){e.parent=this.curGroupItem},t.prototype.getRuleInput=function(e){void 0===e&&(e=!1);var t=this.queues,n=this.captureIndex,r=this.isRoot,i="";return 0===n&&(i="?:"+i),i+=t.map(function(t){return t.getRuleInput(e)}).join("|"),r?i:"("+i+")"},t.prototype.buildRule=function(e){if(this.curRule)return this.curRule;var t=this.getRuleInput(!0),n=Object.keys(e).join("");return new Function("","return /^"+t+"$/"+n)()},t.prototype.prebuild=function(e){var t=this.queues,n=this.captureIndex,r=this.captureName,i="",o=e.flags,u=e.namedGroupConf,s=t.length,l=function(){var e=[];if(r&&r.indexOf(":")>-1&&u){var n=r.split(":");if(n.length===s){var i=[],o=[];n.forEach(function(e,t){"boolean"==typeof u[e]&&(!0===u[e]?o:i).push(t)});var a=[];if(o.length)a=o;else if(i.length&&i.length<s)for(var l=0;l<s;l++)i.indexOf(l)<0&&a.push(l);a.length&&(e=a.map(function(e){return t[e]}))}}return e}();if(r&&u&&u[r]){var p=this.buildRule(o),c=a(0,u[r].length-1);if(i=u[r][c],!p.test(i))throw new Error("the namedGroupConf of "+r+"'s value \""+i+'" is not match the rule '+p.toString())}else{var h=l.length?l:t;i=h[c=a(0,h.length-1)].build(e)}return r&&(e.namedGroupData[r]=i),n&&(e.captureGroupData[n]=i),i},t}(g);t.RegexpGroup=Q}]);