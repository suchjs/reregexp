!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);window.ReRegExp=r.default},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.RegexpGroup=t.RegexpGroupItem=t.RegexpUnicodeCategory=t.RegexpASCII=t.RegexpUnicodeAll=t.RegexpUnicode=t.RegexpHexCode=t.RegexpRange=t.RegexpSet=t.RegexpTimesQuantifiers=t.RegexpTimesMulti=t.RegexpTimes=t.RegexpRefOrNumber=t.RegexpOctal=t.RegexpTranslateChar=t.RegexpChar=t.RegexpAnchor=t.RegexpPrint=t.RegexpCharset=t.RegexpControl=t.RegexpBegin=t.RegexpBackspace=t.RegexpNull=t.RegexpAny=t.RegexpLookaround=t.RegexpSpecial=t.RegexpReference=t.RegexpOrigin=t.RegexpEmpty=t.RegexpPart=t.regexpRule=t.parserRule=t.CharsetHelper=void 0;var u=function(){return Math.random()>=.5},s=function(e,t){return e===t?e:e+Math.floor(Math.random()*(t+1-e))},c=function(e){for(var t=p(e),n=s(1,t),r=e.length,o=0;r>1;){var i=Math.floor(r/2),a=e[o+i-1],u=e[o+i];if(n>=a&&n<=u){o+=i-(n===a?1:0);break}n>u?(o+=i+1,r-=i+1):r-=i}return{rand:n,index:o}},p=function(e){return e[e.length-1]},l=function(){function e(){}return e.charsetOfAll=function(){return e.charsetOfNegated("ALL")},e.charsetOfDotall=function(){return e.charsetOfNegated("DOTALL")},e.charsetOfNegated=function(t){var n=e.points,r=e.cache;if(r[t])return r[t];var o=0,i=[],a=[],u=0,s=function(e,t){var n=t-e+1;n<=0||(i.push(n>1?[e,t]:[e]),u+=n,a.push(u))};if("DOTALL"===t)s(o,56319),s(57344,65535);else{for(var c="ALL"===t?[[10],[13],[8232,8233]]:n[t.toLowerCase()],l="S"===t,h=c.length-(l?1:0),f=0;o<=56319&&h>f;){var g=c[f++],d=g[0],y=g[1];s(o,d-1),o=(y||d)+1}if(o<56319&&s(o,56319),l){var v=p(c)[0];s(57344,v-1),s(v+1,65535)}else s(57344,65535)}return r[t]={ranges:i,totals:a}},e.charsetOf=function(t){var n=e.lens;return{ranges:e.points[t],totals:n[t]}},e.getCharsetInfo=function(t,n){var r;void 0===n&&(n={});var o=e;return["w","d","s"].includes(t)?r=o.charsetOf(t):(r="."===t?n.s?o.charsetOfDotall():o.charsetOfAll():o.charsetOfNegated(t),n.u&&(r={ranges:r.ranges.concat([o.bigCharPoint]),totals:r.totals.concat(o.bigCharTotal)})),r},e.make=function(t,n){return void 0===n&&(n={}),e.makeOne(e.getCharsetInfo(t,n))},e.makeOne=function(e){var t=e.totals,n=e.ranges,r=c(t),o=r.rand,i=r.index,a=n[i][0]+(o-(t[i-1]||0))-1;return String.fromCodePoint(a)},e.points={d:[[48,57]],w:[[48,57],[65,90],[95],[97,122]],s:[[9,13],[32],[160],[5760],[8192,8202],[8232,8233],[8239],[8287],[12288],[65279]]},e.lens={d:[10],w:[10,36,37,63],s:[5,6,7,8,18,20,21,22,23,24]},e.bigCharPoint=[65536,1114111],e.bigCharTotal=1048576,e.cache={},e}();t.CharsetHelper=l;var h=l,f={beginWith:"^",endWith:"$",matchAny:".",groupBegin:"(",groupEnd:")",groupSplitor:"|",setBegin:"[",setEnd:"]",rangeSplitor:"-",multipleBegin:"{",multipleEnd:"}",multipleSplitor:",",translate:"\\",leastOne:"+",multiple:"*",optional:"?",setNotIn:"^",delimiter:"/"},g={i:1,u:2,s:4,g:8,m:16,y:32,d:64},d=Object.keys(g).join("");t.parserRule=new RegExp("^\\/(?:\\\\.|\\[[^\\]]*\\]|[^\\/])+?/[".concat(d,"]*"));t.regexpRule=new RegExp("^\\/".concat("((?:\\\\.|\\[[^\\]]*\\]|[^\\/])+?)","\\/([").concat(d,"]*)$"));var y=new RegExp("^".concat("((?:\\\\.|\\[[^\\]]*\\]|[^\\/])+?)","$")),v=/^(0[0-7]{0,2}|[1-3][0-7]{0,2}|[4-7][0-7]?)/,m=function(){function e(e,n){if(void 0===n&&(n={}),this.rule=e,this.config=n,this.context="",this.flags=[],this.lastRule="",this.queues=[],this.ruleInput="",this.flagsHash={},this.totalFlagBinary=0,this.rootQueues=[],this.hasLookaround=!1,this.hasNullRoot=null,this.anyCharacterHandleDone=!1,e instanceof RegExp)this.rule=e.toString(),this.context=e.source,this.flags=e.flags.split("");else{if(!t.regexpRule.test(e)&&!y.test(e))throw new Error("wrong regexp:".concat(e));this.rule=e,this.context=RegExp.$1,this.flags=RegExp.$2?RegExp.$2.split(""):[]}this.checkFlags(),this.parse(),this.lastRule=this.ruleInput}return e.prototype.build=function(){if(this.hasLookaround)throw new Error("the build method does not support lookarounds.");var e=this.rootQueues,t="",n=i(i({},this.config),{flags:this.flagsHash,namedGroupData:{},captureGroupData:{}}),r="the regexp has null expression, will match nothing";if(!0===this.hasNullRoot)throw new Error(r);if(this.hasNullRoot=e.some((function(e){return!!e.isMatchNothing||(t+=e.build(n),!1)})),this.hasNullRoot)throw new Error(r);if(this.config.capture){for(var o=n.captureGroupData,a=n.namedGroupData,u=1;u<=9;u++)this["$".concat(u)]=o[u]||"";Object.keys(a).length>0&&(this.groups=a)}return t},e.prototype.info=function(){var e=this;return{rule:e.rule,context:e.context,lastRule:e.lastRule,flags:e.flags,queues:e.queues}},e.prototype.parse=function(){for(var t=this,n=this.context,r=f,o=0,u=n.length,s=[new I],c=[],l=[],h=[],g={},d={},y=/^(\?(?:<(.+?)>|:))/,m=/^(\?(?:<?[=!]))/,R=this.hasFlag("u"),x=[],b=[],_=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){return e.parser=t})),s.push.apply(s,e)},D=0,W=null,Y=null,J=function(e){var t=p(x)||p(c)||p(l);["group","lookaround"].includes(e.type)&&(("group"===e.type?c:l).push(e),x.push(e));t&&("group"===t.type?t.addItem(e):e.parent=t)},K=function(e,t){return["groupBegin","groupSplitor","times","begin","anchor"].includes(e)||"charset"===e&&"b"===t.charset.toLowerCase()};o<u;){var V=n.charAt(o++);if((Y||W)&&["[","(",")","|","*","?","+","{",".","}","^","$","/"].includes(V)){var X=new S(V);Y?(X.parent=Y,Y=null):X.parent=W,_(X)}else{var ee=n.slice(o),te=p(c),ne=p(s),re=null,oe=null;switch(V){case r.translate:var ie=n.charAt(o++),ae=V+ie;if("u"===ie||"x"===ie)if(0===(se=(re="x"===ie?new Q:R?new U:new H).untilEnd(n.slice(o)))){if(R)throw new Error("invalid unicode code point:".concat(n));re=new F("\\".concat(ie))}else o+=se;else if("c"===ie){var ue=n.charAt(o);if(R){if(!/[a-zA-Z]/.test(ue))throw new Error("invalid unicode escape,unexpect control character[".concat(o,"]:\\c").concat(ue));re=new k(ue),o++}else/[A-Za-z]/.test(ue)?(re=new k(ue),o++):(re=new S("\\"),o--)}else if("p"===ie||"P"===ie)if(R){if("function"!=typeof e.UPCFactory)throw new Error("You must set the ReRegExp.UPCFactory before you use the unicode category.");var se;if(0===(se=(re=new z(ie)).untilEnd(n.slice(o))))throw new Error("Invalid unicode category syntax at ".concat(o,": \\").concat(ie));o+=se}else re=new F("\\".concat(ie));else if(["d","D","w","W","s","S","b","B"].includes(ie))re=new N(ae);else if(["t","r","n","f","v"].includes(ie))re=new j(ae);else if(/^(\d+)/.test(ee)){var ce=RegExp.$1;if(W)if(v.test(ce)){var pe=RegExp.$1;re=new T("\\".concat(pe)),o+=pe.length-1}else re=new F("\\".concat(ce.charAt(0)));else if("0"===ce.charAt(0))if(1===ce.length)re=new A;else if(+ce.charAt(1)>7)re=new A;else{pe=ce.length>=3&&+ce.charAt(2)<=7?ce.slice(1,3):ce.charAt(1);re=new T("\\0".concat(pe)),o+=pe.length}else if(o+=ce.length-1,+ce<=h.length){re=new w("\\".concat(ce));var le=h[+ce-1];d[ce]=le,le.isAncestorOf(te)?re.ref=null:re.ref=le}else re=new $("\\".concat(ce)),b.push(re)}else if("k"===ie&&/^<([^>]+?)>/.test(n.slice(o))){var he=RegExp.$1;if(!g[he])throw new Error("Invalid named capture referenced:".concat(he));o+=he.length+2;le=g[he];re=new w("\\".concat(le.captureIndex),he),le.isAncestorOf(te)?re.ref=null:re.ref=le}else re=new F(ae);break;case r.groupBegin:var fe=m.test(ee);if(fe){var ge=RegExp.$1;re=new E(ge),oe=new C("lookaroundBegin"),this.hasLookaround=!0,o+=ge.length}else re=new Z,oe=new C("groupBegin");if(!fe){if(re=re,y.test(ee)){var de=RegExp.$1,ye=RegExp.$2;"?:"===de||(re.captureIndex=++D,re.captureName=ye,g[ye]=re),o+=de.length}else re.captureIndex=++D;re.captureIndex>0&&h.push(re)}break;case r.groupEnd:if(!x.length)throw new Error("unmatched ".concat(V,',you mean "\\').concat(V,'"?'));var ve=x.pop(),me=("group"===ve.type?c:l).pop();me.isComplete=!0,(oe=new C("".concat(ve.type,"End"))).parent=me;break;case r.groupSplitor:var Re=p(c);if(Re)Re.addNewGroup();else{var xe=new Z;xe.isRoot=!0,xe.addRootItem(s.slice(1)),s.splice(1,0,xe),c.push(xe)}oe=new C("groupSplitor");break;case r.setBegin:/^\\b]/.test(ee)?(re=new O,o+=3):(W=new G,"^"===ee.charAt(0)&&(W.reverse=!0,o+=1),_(W),J(W),(oe=new C("setBegin")).parent=W);break;case r.setEnd:W?(W.isComplete=!0,(oe=new C("setEnd")).parent=W,W=null):re=new S(V);break;case r.rangeSplitor:if(W)if(ne.codePoint<0)re=new S(V);else ee.charAt(0)===r.setEnd?(W.isComplete=!0,W=null,o+=1):(W.pop(),(Y=new L).parent=W,s.pop().parent=Y,_(Y,ne),(oe=new C("rangeSplitor")).parent=Y);else re=new S(V);break;case r.multipleBegin:case r.optional:case r.multiple:case r.leastOne:var be=(re=V===r.multipleBegin?new M:new(B.bind.apply(B,a([void 0],this.config.maxRepeat?[this.config.maxRepeat]:[],!1)))).untilEnd(n.slice(o-1));if(be>0){var we=ne instanceof C?ne.special:ne.type,Ce="[".concat(ne.input,"]nothing to repeat[index:").concat(o,"]:").concat(n.slice(o-1,o-1+be));if(K(we,ne))throw new Error(Ce);o+=be-1,re.target="groupEnd"===we||"setEnd"===we?ne.parent:ne}else re=new S(V);break;case r.matchAny:re=new P(t.anyCharacterHandleDone?t.anyCharacterHandle:(t.anyCharacterHandleDone=!0,t.anyCharacterHandle=P.genDiyCharactersHandle(i(i({},t.config),{flags:t.flagsHash}))));break;case r.beginWith:case r.endWith:re=new q(V);break;case r.delimiter:throw new Error('unexpected pattern end delimiter:"/'.concat(ee,'"'));default:re=new S(V)}if(re){var Ee=re;if(_(Ee),Y){if(re.codePoint<0){var Pe=s.splice(-4,4),Ae=Pe[1],Oe=Pe[3],Ie=new S("-");W.pop(),[Ae,Ie,Oe].map((function(e){return e.parent=W,_(e),e}))}else re.parent=Y;Y=null}else W?Ee.parent=W:J(Ee)}oe&&(re&&(oe.parent=re),_(oe))}}if(b.length){var ke=function(e,t,n){for(var r=0,o=!1,i=e.length;r<i;r++)if(t===e[r]){o=!0;break}o&&e.splice.apply(e,a([r,1],n,!1))},Ne=h.length;b.map((function(e){var t,n=e.input.slice(1),r=n.length,o=0;if("0"!==n.charAt(0)&&+n<=Ne)(t=new w(e.input)).ref=null,o=r;else if(/^([1-3][0-7]{0,2}|[4-7][0-7]?)/.test(n)){var i=RegExp.$1;t=new T("\\".concat(i)),o+=i.length}else t=new F("\\".concat(n.charAt(0))),o+=1;t.linkParent=e.parent;for(var a=[t];o<r;){var u=new S(n.charAt(o++));u.linkParent=e.parent,a.push(u)}e.parent&&ke(e.parent.queues,e,a),ke(s,e,a)}))}s.length>1&&"group"===s[1].type&&!0===s[1].isRoot&&(s[1].isComplete=!0);var je=[],qe="";s.every((function(e){if(!e.isComplete)throw new Error("the regexp segment ".concat(e.type," is not completed:").concat(e.input));return null===e.parent&&(je.push(e),qe+=e.getRuleInput()),!0})),this.ruleInput=qe,this.rootQueues=je,this.queues=s},e.prototype.checkFlags=function(){var e,t=this.flags,n=t.length;if(0!==n){if(n>Object.keys(g).length)throw new Error("The rule may has repeated or unrecognized flags<got '".concat(t.join(""),"'>, please check."));for(var r=t[0],o=g[r],i=((e={})[r]=!0,e),a=1,u=t.length;a<u;a++){var s=t[a],c=g[s];if(0!=(o&c))throw new Error("wrong flag[".concat(a,"]:").concat(s));o+=c,i[s]=!0}this.flagsHash=i,this.totalFlagBinary=o,(i.y||i.m||i.g)&&console.warn("the flags of 'g','m','y' will ignore,but you can set flags such as 'i','u','s'")}},e.prototype.hasFlag=function(e){var t=this.totalFlagBinary,n=g[e];return n&&0!=(n&t)},e.prototype.getFlagsHash=function(){return this.flagsHash},e.maxRepeat=5,e.features={unicode:!0,namedCapture:!0,upc:!0},e}();t.default=m;var R=function(){function e(e){void 0===e&&(e=""),this.input=e,this.queues=[],this.codePoint=-1,this.min=1,this.max=1,this.dataConf={},this.buildForTimes=!1,this.curParent=null,this.matchNothing=!1,this.completed=!0}return Object.defineProperty(e.prototype,"parser",{get:function(){return this.parserInstance},set:function(e){this.parserInstance=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.getCodePointCount()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.curParent},set:function(e){this.curParent=e,"special"!==this.type&&e.add(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkParent",{set:function(e){this.curParent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMatchNothing",{get:function(){return this.matchNothing},set:function(e){this.matchNothing=e,this.parent&&(this.parent.isMatchNothing=e)},enumerable:!1,configurable:!0}),e.prototype.setRange=function(e){var t=this;Object.keys(e).forEach((function(n){t[n]=e[n]}))},e.prototype.add=function(e){this.queues=this.queues.concat(e)},e.prototype.pop=function(){return this.queues.pop()},e.prototype.build=function(e){var t=this,n=this.min,r=this.max,o="";if(0===n&&0===r);else{var i=n+Math.floor(Math.random()*(r-n+1));if(0!==i){var a=function(){var n=t.prebuild(e);return e.flags&&e.flags.i&&(n=u()?u()?n.toLowerCase():n.toUpperCase():n),n};if(this.buildForTimes)for(;i--;)o+=a();else o=a().repeat(i)}}return this.dataConf=e,this.setDataConf(e,o),o},e.prototype.untilEnd=function(e){},e.prototype.setDataConf=function(e,t){},e.prototype.isAncestorOf=function(e){do{if(e===this)return!0}while(e=null==e?void 0:e.parent);return!1},e.prototype.getRuleInput=function(e){return this.queues.length?this.buildRuleInputFromQueues():this.input},e.prototype.buildRuleInputFromQueues=function(){return this.queues.reduce((function(e,t){return e+t.getRuleInput()}),"")},e.prototype.prebuild=function(e){return this.queues.length?this.queues.reduce((function(t,n){return t+n.build(e)}),""):""},e.prototype.getCodePointCount=function(){return 1},e}();t.RegexpPart=R;var x=function(e){function t(t){var n=e.call(this,t)||this;return n.min=0,n.max=0,n}return o(t,e),t}(R);t.RegexpEmpty=x;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.prebuild=function(){return this.input},t}(R);t.RegexpOrigin=b;var w=function(e){function t(t,n){void 0===n&&(n="");var r=e.call(this,t)||this;return r.name=n,r.type="reference",r.ref=null,r.index=Number("".concat(t.slice(1))),r}return o(t,e),t.prototype.prebuild=function(e){var t=this.ref;if(null===t)return"";var n=t.captureIndex,r=e.captureGroupData;return r.hasOwnProperty(n)?r[n]:""},t}(R);t.RegexpReference=w;var C=function(e){function t(t){var n=e.call(this)||this;return n.special=t,n.type="special",n}return o(t,e),t}(x);t.RegexpSpecial=C;var E=function(e){function t(t){var n=e.call(this)||this;return n.type="lookaround",n.looktype=t,n.isComplete=!1,n}return o(t,e),t.prototype.getRuleInput=function(){return"("+this.looktype+this.buildRuleInputFromQueues()+")"},t}(x);t.RegexpLookaround=E;var P=function(e){function t(t){var n=e.call(this,".")||this;return n.handle=t,n.type="any",n.buildForTimes=!0,n}return o(t,e),t.genDiyCharactersHandle=function(e){var t=e.charactersOfAny||m.charactersOfAny;if(Array.isArray(t)){if(0===t.length)throw new Error("The user defined 'charactersOfAny' should not be an empty range array.");for(var n=void 0,r=[],o=0,i=0,a=n=Array.isArray(t[0])?t:[t];i<a.length;i++){var u=a[i],s=u[0],c=u[1];o+=(void 0===c?s:c)-s+1,r.push(o)}var p={ranges:n,totals:r};return function(){return h.makeOne(p)}}if("function"==typeof t)return function(){return t(e.flags)}},t.prototype.prebuild=function(e){return(this.handle||function(){return h.make(".",e.flags)})()},t}(R);t.RegexpAny=P;var A=function(e){function t(){var t=e.call(this,"\\0")||this;return t.type="null",t}return o(t,e),t.prototype.prebuild=function(){return"\0"},t}(R);t.RegexpNull=A;var O=function(e){function t(){var t=e.call(this,"[\\b]")||this;return t.type="backspace",t}return o(t,e),t.prototype.prebuild=function(){return"\b"},t}(R);t.RegexpBackspace=O;var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="begin",t}return o(t,e),t}(x);t.RegexpBegin=I;var k=function(e){function t(t){var n=e.call(this,"\\c".concat(t))||this;return n.type="control",n.codePoint=parseInt(t.charCodeAt(0).toString(2).slice(-5),2),n}return o(t,e),t.prototype.prebuild=function(){return String.fromCharCode(this.codePoint)},t}(R);t.RegexpControl=k;var N=function(e){function t(t){var n=e.call(this,t)||this;return n.type="charset",n.charset=n.input.slice(-1),n.buildForTimes=!0,n}return o(t,e),t.prototype.prebuild=function(e){var t=this.charset;return"b"===t||"B"===t?(console.warn("The  \\b or \\B"),""):h.make(t,e.flags)},t.prototype.getCodePointCount=function(){var e=this.parser,t=this.charset,n=h.getCharsetInfo(t,e.getFlagsHash()).totals;return p(n)},t}(R);t.RegexpCharset=N;var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="print",t}return o(t,e),t.prototype.prebuild=function(){return new Function("","return '".concat(this.input,"'"))()},t}(R);t.RegexpPrint=j;var q=function(e){function t(t){var n=e.call(this,t)||this;return n.type="anchor",n.anchor=t,console.warn('the anchor of "'.concat(n.input,'" will ignore.')),n}return o(t,e),t}(x);t.RegexpAnchor=q;var S=function(e){function t(t){var n=e.call(this,t)||this;return n.type="char",n.codePoint=t.codePointAt(0),n}return o(t,e),t}(b);t.RegexpChar=S;var F=function(e){function t(t){var n=e.call(this,t)||this;return n.type="translate",n.codePoint=t.slice(-1).codePointAt(0),n}return o(t,e),t.prototype.prebuild=function(){return this.input.slice(-1)},t}(b);t.RegexpTranslateChar=F;var T=function(e){function t(t){var n=e.call(this,t)||this;return n.type="octal",n.codePoint=Number("0o".concat(t.slice(1))),n}return o(t,e),t.prototype.prebuild=function(){return String.fromCodePoint(this.codePoint)},t}(R);t.RegexpOctal=T;var $=function(e){function t(t){var n=e.call(this,t)||this;return n.type="refornumber",n}return o(t,e),t.prototype.prebuild=function(){throw new Error('the "'.concat(this.input,'" must parse again,either reference or number'))},t}(R);t.RegexpRefOrNumber=$;var _=function(e){function t(){var t=e.call(this)||this;return t.type="times",t.maxNum=m.maxRepeat,t.greedy=!0,t.minRepeat=0,t.maxRepeat=0,t.isComplete=!1,t}return o(t,e),Object.defineProperty(t.prototype,"target",{set:function(e){e.setRange({min:this.minRepeat,max:this.maxRepeat})},enumerable:!1,configurable:!0}),t.prototype.untilEnd=function(e){if(this.rule.test(e)){var t=RegExp.$1;return this.isComplete=!0,this.input=t,this.parse(),t.length}return 0},t}(R);t.RegexpTimes=_;var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^(\{(\d+)(,(\d*))?}(\??))/,t}return o(t,e),t.prototype.parse=function(){var e=RegExp.$2,t=RegExp.$3,n=RegExp.$4,r=RegExp.$5;if(this.greedy="?"!==r,this.minRepeat=parseInt(e,10),this.maxRepeat=Number(n)?parseInt(n,10):t?this.minRepeat+2*this.maxNum:this.minRepeat,this.maxRepeat<this.minRepeat)throw new Error("wrong quantifier: {".concat(this.minRepeat,", ").concat(this.maxRepeat,"}"))},t}(_);t.RegexpTimesMulti=M;var B=function(e){function t(t){void 0===t&&(t=m.maxRepeat);var n=e.call(this)||this;return n.maxNum=t,n.rule=/^(\*\?|\+\?|\?\?|\*|\+|\?)/,n}return o(t,e),t.prototype.parse=function(){var e=RegExp.$1;switch(this.greedy=1===e.length,e.charAt(0)){case"*":this.maxRepeat=this.maxNum;break;case"+":this.minRepeat=1,this.maxRepeat=this.maxNum;break;case"?":this.maxRepeat=1}},t}(_);t.RegexpTimesQuantifiers=B;var G=function(e){function t(){var t=e.call(this)||this;return t.type="set",t.reverse=!1,t.isMatchAnything=!1,t.codePointResult=null,t.isComplete=!1,t.buildForTimes=!0,t}return o(t,e),Object.defineProperty(t.prototype,"parser",{get:function(){return this.parserInstance},set:function(e){this.parserInstance=e,this.makeCodePointResult()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.completed},set:function(e){(this.completed=e,!0===e)&&(0===this.queues.length?this.reverse?this.isMatchAnything=!0:this.isMatchNothing=!0:this.makeCodePointResult())},enumerable:!1,configurable:!0}),t.prototype.getRuleInput=function(){return"["+(this.reverse?"^":"")+this.buildRuleInputFromQueues()+"]"},t.prototype.prebuild=function(e){if(this.isMatchAnything)return(new P).build(e);var t,n=this.queues;if(this.reverse)return h.makeOne(this.codePointResult);if(e.extractSetAverage){var r=0,o=n.map((function(e){return r+=e.count}));t=c(o).index}else t=s(0,n.length-1);return this.queues[t].build(e)},t.prototype.makeCodePointResult=function(){if(this.reverse&&this.parser&&this.isComplete){var e=this.queues,t=this.parser.getFlagsHash();if(1===e.length&&"charset"===e[0].type&&["w","s","d"].includes(e[0].charset.toLowerCase())){var n=32^e[0].charset.charCodeAt(0),r=String.fromCharCode(n);this.codePointResult=h.getCharsetInfo(r,t)}else{var o=e.reduce((function(e,n){var r,o=n.type;if("charset"===o){var i=n.charset;"b"===i||"B"===i?(console.warn("the charset \\b or \\B will ignore"),r=[]):r=h.getCharsetInfo(i,t).ranges.slice(0)}else r="range"===o?[n.queues.map((function(e){return e.codePoint}))]:[[n.codePoint]];return e.concat(r)}),[]);o.push([55296,57343],t.u?[1114112]:[65536]),o.sort((function(e,t){return t[0]>e[0]?-1:t[0]===e[0]?t[1]>e[1]?1:-1:1}));for(var i=[],a=0,u=0,s=o.length;u<s;u++){var c=o[u],p=c[0],l=c[1]||p;a<p&&i.push(a+1===p?[a]:[a,p-1]),a=Math.max(l+1,a)}if(0===i.length)this.isMatchNothing=!0;else{var f=0,g=i.map((function(e){return 1===e.length?f+=1:f+=e[1]-e[0]+1,f}));this.codePointResult={totals:g,ranges:i}}}}},t}(R);t.RegexpSet=G;var L=function(e){function t(){var t=e.call(this)||this;return t.type="range",t.isComplete=!1,t}return o(t,e),t.prototype.add=function(t){if(e.prototype.add.call(this,t),2===this.queues.length){this.isComplete=!0;var n=this.queues,r=n[0],o=n[1];if(r.codePoint>o.codePoint)throw new Error("invalid range:".concat(r.getRuleInput(),"-").concat(o.getRuleInput()))}},t.prototype.getRuleInput=function(){var e=this.queues,t=e[0],n=e[1];return t.getRuleInput()+"-"+n.getRuleInput()},t.prototype.prebuild=function(){var e=this.queues,t=e[0],n=e[1],r=t.codePoint,o=n.codePoint;return String.fromCodePoint(s(r,o))},t.prototype.getCodePointCount=function(){var e=this.queues,t=e[0],n=e[1],r=t.codePoint;return n.codePoint-r+1},t}(R);t.RegexpRange=L;var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="hexcode",t}return o(t,e),t.prototype.untilEnd=function(e){var t=this.rule,n=this.codeType;if(t.test(e)){var r=RegExp.$1,o=RegExp.$2||r;if(this.codePoint=Number("0x".concat(o)),this.codePoint>1114111)throw new Error("invalid unicode code point:\\u{".concat(o,"},can not great than 0x10ffff"));return this.input="\\".concat(n).concat(r),r.length}return 0},t}(b);t.RegexpHexCode=D;var H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^([0-9A-Fa-f]{4})/,t.codeType="u",t}return o(t,e),t}(D);t.RegexpUnicode=H;var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^({(0*[0-9A-Fa-f]{1,6})}|[0-9A-Fa-f]{4})/,t.codeType="u",t}return o(t,e),t}(D);t.RegexpUnicodeAll=U;var Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^([0-9A-Fa-f]{2})/,t.codeType="x",t}return o(t,e),t}(D);t.RegexpASCII=Q;var z=function(e){function t(t){var n=e.call(this)||this;return n.symbol=t,n.type="unicode-category",n.rule=/^([A-Z]|\{(?:(?:([a-zA-Z_]+)=)?([A-Za-z_]+))})/,n}return o(t,e),t.prototype.untilEnd=function(e){if(this.rule.test(e)){var t=RegExp.$1,n=RegExp.$2,r=RegExp.$3,o=this.symbol,i="P"===o,a=void 0;r?(a={short:!1,negate:i,value:r},n&&(a.key=n)):a={short:!0,negate:i,value:t},this.data=a;var u=m.UPCFactory;return this.generator=u(a),this.input="\\".concat(o).concat(t),t.length}return 0},t.prototype.prebuild=function(){return this.generator.generate()},t}(R);t.RegexpUnicodeCategory=z;var W=function(e){function t(t){var n=e.call(this)||this;return n.index=t,n.type="group-item",n}return o(t,e),t.prototype.getRuleInput=function(e){var t=this;return void 0===e&&(e=!1),this.queues.reduce((function(n,r){return n+(e&&"reference"===r.type&&null!==r.ref?r.ref.getRuleInput(e):t.isEndLimitChar(r)?"":r.getRuleInput(e))}),"")},t.prototype.prebuild=function(e){var t=this;return this.queues.reduce((function(n,r){var o;return t.isEndLimitChar(r)?(console.warn("the ^ and $ of the regexp will ignore"),o=""):o=r.build(e),n+o}),"")},t.prototype.isEndLimitChar=function(e){return"anchor"===e.type},t}(R);t.RegexpGroupItem=W;var Z=function(e){function t(){var t=e.call(this)||this;return t.type="group",t.captureIndex=0,t.captureName="",t.queues=[],t.isRoot=!1,t.curGroupItem=null,t.curRule=null,t.isComplete=!1,t.buildForTimes=!0,t.addNewGroup(),t}return o(t,e),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e,!0===e&&(this.isMatchNothing=this.queues.every((function(e){return e.isMatchNothing})))},enumerable:!1,configurable:!0}),t.prototype.addNewGroup=function(){var e=this.queues,t=new W(e.length);return this.curGroupItem=t,t.parent=this,t},t.prototype.addRootItem=function(e){var t=this;e.map((function(e){null===e.parent&&(e.parent=t.curGroupItem)})),this.addNewGroup()},t.prototype.addItem=function(e){e.parent=this.curGroupItem},t.prototype.getRuleInput=function(e){void 0===e&&(e=!1);var t=this.queues,n=this.captureIndex,r=this.isRoot,o="";return 0!==n||r||(o="?:"+o),o+=t.map((function(t){return t.getRuleInput(e)})).join("|"),r?o:"(".concat(o,")")},t.prototype.buildRule=function(e){if(this.curRule)return this.curRule;var t=this.getRuleInput(!0),n=Object.keys(e).join("");return this.curRule=new Function("","return /^".concat(t,"$/").concat(n))()},t.prototype.prebuild=function(e){var t,n=this.queues,r=this.captureIndex,o=this.captureName,i="",a=e.flags,u=e.namedGroupConf,c=n.length,p=[],l=[],h=[],f=[];if(o&&o.includes("_")&&u){var g=o.split("_");if(g.length===c){var d=!1;if("object"==typeof u[o]){var y=u[o];g.forEach((function(e,t){if("boolean"==typeof y[e]&&!1===y[e]);else{d=!0;var r=n[t];Array.isArray(y[e])?(l.push(r),h.push(y[e])):p.push(r)}}))}if(!d)throw new Error("the specified named group '".concat(o,"' are all filtered by the config."));var v=l.length;v&&(x=s(0,v+p.length-1))<v&&(t=l[x],f=h[x])}}if(o&&u&&u[o]&&(Array.isArray(u[o])||t)){var m=void 0,R=void 0;if(t?(m=f,R=this.buildRule.call(t,a)):(m=u[o],R=this.buildRule(a)),i=m[x=s(0,m.length-1)],!R.test(i))throw new Error("the namedGroupConf of ".concat(o,"'s value \"").concat(i,'" is not match the rule ').concat(R.toString()))}else{var x,b=p.length?p:n;i=b[x=s(0,b.length-1)].build(e)}return o&&(e.namedGroupData[o]=i),r&&(e.captureGroupData[r]=i),i},t}(R);t.RegexpGroup=Z}]);