!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);window.ReRegExp=n.default},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.RegexpGroup=t.RegexpGroupItem=t.RegexpUnicodeCategory=t.RegexpASCII=t.RegexpUnicodeAll=t.RegexpUnicode=t.RegexpHexCode=t.RegexpRange=t.RegexpSet=t.RegexpTimesQuantifiers=t.RegexpTimesMulti=t.RegexpTimes=t.RegexpRefOrNumber=t.RegexpOctal=t.RegexpTranslateChar=t.RegexpChar=t.RegexpAnchor=t.RegexpPrint=t.RegexpCharset=t.RegexpControl=t.RegexpBegin=t.RegexpBackspace=t.RegexpNull=t.RegexpAny=t.RegexpLookaround=t.RegexpSpecial=t.RegexpReference=t.RegexpOrigin=t.RegexpEmpty=t.RegexpPart=t.regexpRule=t.parserRule=t.CharsetHelper=void 0;var a=function(){return Math.random()>=.5},s=function(e,t){return e===t?e:e+Math.floor(Math.random()*(t+1-e))},p=function(e){for(var t=l(e),r=s(1,t),n=e.length,i=0;n>1;){var o=Math.floor(n/2),u=e[i+o-1],a=e[i+o];if(r>=u&&r<=a){i+=o-(r===u?1:0);break}r>a?(i+=o+1,n-=o+1):n-=o}return{rand:r,index:i}},l=function(e){return e[e.length-1]},c=function(){function e(){}return e.charsetOfAll=function(){return e.charsetOfNegated("ALL")},e.charsetOfDotall=function(){return e.charsetOfNegated("DOTALL")},e.charsetOfNegated=function(t){var r=e.points,n=e.cache;if(n[t])return n[t];var i=0,o=[],u=[],a=0,s=function(e,t){var r=t-e+1;r<=0||(o.push(r>1?[e,t]:[e]),a+=r,u.push(a))};if("DOTALL"===t)s(i,56319),s(57344,65535);else{for(var p="ALL"===t?[[10],[13],[8232,8233]]:r[t.toLowerCase()],c="S"===t,h=p.length-(c?1:0),f=0;i<=56319&&h>f;){var g=p[f++],d=g[0],v=g[1];s(i,d-1),i=(v||d)+1}if(i<56319&&s(i,56319),c){var y=l(p)[0];s(57344,y-1),s(y+1,65535)}else s(57344,65535)}return n[t]={ranges:o,totals:u}},e.charsetOf=function(t){var r=e.lens;return{ranges:e.points[t],totals:r[t]}},e.getCharsetInfo=function(t,r){var n;void 0===r&&(r={});var i=e;return["w","d","s"].includes(t)?n=i.charsetOf(t):(n="."===t?r.s?i.charsetOfDotall():i.charsetOfAll():i.charsetOfNegated(t),r.u&&(n={ranges:n.ranges.concat([i.bigCharPoint]),totals:n.totals.concat(i.bigCharTotal)})),n},e.make=function(t,r){return void 0===r&&(r={}),e.makeOne(e.getCharsetInfo(t,r))},e.makeOne=function(e){var t=e.totals,r=e.ranges,n=p(t),i=n.rand,o=n.index,u=r[o][0]+(i-(t[o-1]||0))-1;return String.fromCodePoint(u)},e.points={d:[[48,57]],w:[[48,57],[65,90],[95],[97,122]],s:[[9,13],[32],[160],[5760],[8192,8202],[8232,8233],[8239],[8287],[12288],[65279]]},e.lens={d:[10],w:[10,36,37,63],s:[5,6,7,8,18,20,21,22,23,24]},e.bigCharPoint=[65536,1114111],e.bigCharTotal=1048576,e.cache={},e}();t.CharsetHelper=c;var h=c,f={beginWith:"^",endWith:"$",matchAny:".",groupBegin:"(",groupEnd:")",groupSplitor:"|",setBegin:"[",setEnd:"]",rangeSplitor:"-",multipleBegin:"{",multipleEnd:"}",multipleSplitor:",",translate:"\\",leastOne:"+",multiple:"*",optional:"?",setNotIn:"^",delimiter:"/"},g={i:1,u:2,s:4,g:8,m:16,y:32},d=Object.keys(g).join("");t.parserRule=new RegExp("^\\/(?:\\\\.|\\[[^\\]]*\\]|[^\\/])+?/["+d+"]*");t.regexpRule=new RegExp("^\\/((?:\\\\.|\\[[^\\]]*\\]|[^\\/])+?)\\/(["+d+"]*)$");var v=new RegExp("^((?:\\\\.|\\[[^\\]]*\\]|[^\\/])+?)$"),y=/^(0[0-7]{0,2}|[1-3][0-7]{0,2}|[4-7][0-7]?)/,m=function(){function e(e,r){if(void 0===r&&(r={}),this.rule=e,this.config=r,this.context="",this.flags=[],this.lastRule="",this.queues=[],this.ruleInput="",this.flagsHash={},this.totalFlagBinary=0,this.rootQueues=[],this.hasLookaround=!1,this.hasNullRoot=null,e instanceof RegExp)this.rule=e.toString(),this.context=e.source,this.flags=e.flags.split("");else{if(!t.regexpRule.test(e)&&!v.test(e))throw new Error("wrong regexp:"+e);this.rule=e,this.context=RegExp.$1,this.flags=RegExp.$2?RegExp.$2.split(""):[]}this.checkFlags(),this.parse(),this.lastRule=this.ruleInput}return e.prototype.build=function(){if(this.hasLookaround)throw new Error("the build method does not support lookarounds.");var e=this.rootQueues,t="",r=o(o({},this.config),{flags:this.flagsHash,namedGroupData:{},captureGroupData:{}}),n="the regexp has null expression, will match nothing";if(!0===this.hasNullRoot)throw new Error(n);if(this.hasNullRoot=e.some((function(e){return!!e.isMatchNothing||(t+=e.build(r),!1)})),this.hasNullRoot)throw new Error(n);if(this.config.capture){for(var i=r.captureGroupData,u=r.namedGroupData,a=1;a<=9;a++)this["$"+a]=i[a]||"";Object.keys(u).length>0&&(this.groups=u)}return t},e.prototype.info=function(){var e=this;return{rule:e.rule,context:e.context,lastRule:e.lastRule,flags:e.flags,queues:e.queues}},e.prototype.parse=function(){for(var t=this,r=this.context,n=f,i=0,o=r.length,a=[new A],s=[],p=[],c=[],h={},g={},d=/^(\?(?:<(.+?)>|:))/,v=/^(\?(?:<?[=!]))/,m=this.hasFlag("u"),R=[],x=[],b=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach((function(e){return e.parser=t})),a.push.apply(a,e)},T=0,D=null,W=null,Y=function(e){var t=l(R)||l(s)||l(p);["group","lookaround"].includes(e.type)&&(("group"===e.type?s:p).push(e),R.push(e));t&&("group"===t.type?t.addItem(e):e.parent=t)},J=function(e,t){return["groupBegin","groupSplitor","times","begin","anchor"].includes(e)||"charset"===e&&"b"===t.charset.toLowerCase()};i<o;){var K=r.charAt(i++);if((W||D)&&["[","(",")","|","*","?","+","{",".","}","^","$","/"].includes(K)){var V=new S(K);W?(V.parent=W,W=null):V.parent=D,b(V)}else{var X=r.slice(i),ee=l(s),te=l(a),re=null,ne=null;switch(K){case n.translate:var ie=r.charAt(i++),oe=K+ie;if("u"===ie||"x"===ie)if(0===(ae=(re="x"===ie?new Q:m?new U:new H).untilEnd(r.slice(i)))){if(m)throw new Error("invalid unicode code point:"+r);re=new F("\\"+ie)}else i+=ae;else if("c"===ie){var ue=r.charAt(i);if(m){if(!/[a-zA-Z]/.test(ue))throw new Error("invalid unicode escape,unexpect control character["+i+"]:\\c"+ue);re=new k(ue),i++}else/[A-Za-z]/.test(ue)?(re=new k(ue),i++):(re=new S("\\"),i--)}else if("p"===ie||"P"===ie)if(m){if("function"!=typeof e.UPCFactory)throw new Error("You must set the ReRegExp.UPCFactory before you use the unicode category.");var ae;if(0===(ae=(re=new z(ie)).untilEnd(r.slice(i))))throw new Error("Invalid unicode category syntax at "+i+": \\"+ie);i+=ae}else re=new F("\\"+ie);else if(["d","D","w","W","s","S","b","B"].includes(ie))re=new N(oe);else if(["t","r","n","f","v"].includes(ie))re=new j(oe);else if(/^(\d+)/.test(X)){var se=RegExp.$1;if(D)if(y.test(se)){var pe=RegExp.$1;re=new $("\\"+pe),i+=pe.length-1}else re=new F("\\"+se.charAt(0));else if("0"===se.charAt(0))if(1===se.length)re=new I;else if(+se.charAt(1)>7)re=new I;else{pe=se.length>=3&&+se.charAt(2)<=7?se.slice(1,3):se.charAt(1);re=new $("\\0"+pe),i+=pe.length}else if(i+=se.length-1,+se<=c.length){re=new w("\\"+se);var le=c[+se-1];g[se]=le,le.isAncestorOf(ee)?re.ref=null:re.ref=le}else re=new _("\\"+se),x.push(re)}else if("k"===ie&&/^<([^>]+?)>/.test(r.slice(i))){var ce=RegExp.$1;if(!h[ce])throw new Error("Invalid named capture referenced:"+ce);i+=ce.length+2;le=h[ce];re=new w("\\"+le.captureIndex,ce),le.isAncestorOf(ee)?re.ref=null:re.ref=le}else re=new F(oe);break;case n.groupBegin:var he=v.test(X);if(he){var fe=RegExp.$1;re=new E(fe),ne=new C("lookaroundBegin"),this.hasLookaround=!0,i+=fe.length}else re=new Z,ne=new C("groupBegin");if(!he){if(re=re,d.test(X)){var ge=RegExp.$1,de=RegExp.$2;"?:"===ge||(re.captureIndex=++T,re.captureName=de,h[de]=re),i+=ge.length}else re.captureIndex=++T;re.captureIndex>0&&c.push(re)}break;case n.groupEnd:if(!R.length)throw new Error("unmatched "+K+',you mean "\\'+K+'"?');var ve=R.pop(),ye=("group"===ve.type?s:p).pop();ye.isComplete=!0,(ne=new C(ve.type+"End")).parent=ye;break;case n.groupSplitor:var me=l(s);if(me)me.addNewGroup();else{var Re=new Z;Re.isRoot=!0,Re.addRootItem(a.slice(1)),a.splice(1,0,Re),s.push(Re)}ne=new C("groupSplitor");break;case n.setBegin:/^\\b]/.test(X)?(re=new O,i+=3):(D=new G,"^"===X.charAt(0)&&(D.reverse=!0,i+=1),b(D),Y(D),(ne=new C("setBegin")).parent=D);break;case n.setEnd:D?(D.isComplete=!0,(ne=new C("setEnd")).parent=D,D=null):re=new S(K);break;case n.rangeSplitor:if(D)if(te.codePoint<0)re=new S(K);else X.charAt(0)===n.setEnd?(D.isComplete=!0,D=null,i+=1):(D.pop(),(W=new L).parent=D,a.pop().parent=W,b(W,te),(ne=new C("rangeSplitor")).parent=W);else re=new S(K);break;case n.multipleBegin:case n.optional:case n.multiple:case n.leastOne:var xe=(re=K===n.multipleBegin?new M:new(B.bind.apply(B,u([void 0],this.config.maxRepeat?[this.config.maxRepeat]:[])))).untilEnd(r.slice(i-1));if(xe>0){var be=te instanceof C?te.special:te.type,we="["+te.input+"]nothing to repeat[index:"+i+"]:"+r.slice(i-1,i-1+xe);if(J(be,te))throw new Error(we);i+=xe-1,re.target="groupEnd"===be||"setEnd"===be?te.parent:te}else re=new S(K);break;case n.matchAny:re=new P;break;case n.beginWith:case n.endWith:re=new q(K);break;case n.delimiter:throw new Error('unexpected pattern end delimiter:"/'+X+'"');default:re=new S(K)}if(re){var Ce=re;if(b(Ce),W){if(re.codePoint<0){var Ee=a.splice(-4,4),Pe=Ee[1],Ie=Ee[3],Oe=new S("-");D.pop(),[Pe,Oe,Ie].map((function(e){return e.parent=D,b(e),e}))}else re.parent=W;W=null}else D?Ce.parent=D:Y(Ce)}ne&&(re&&(ne.parent=re),b(ne))}}if(x.length){var Ae=function(e,t,r){for(var n=0,i=!1,o=e.length;n<o;n++)if(t===e[n]){i=!0;break}i&&e.splice.apply(e,u([n,1],r))},ke=c.length;x.map((function(e){var t,r=e.input.slice(1),n=r.length,i=0;if("0"!==r.charAt(0)&&+r<=ke)(t=new w(e.input)).ref=null,i=n;else if(/^([1-3][0-7]{0,2}|[4-7][0-7]?)/.test(r)){var o=RegExp.$1;t=new $("\\"+o),i+=o.length}else t=new F("\\"+r.charAt(0)),i+=1;t.linkParent=e.parent;for(var u=[t];i<n;){var s=new S(r.charAt(i++));s.linkParent=e.parent,u.push(s)}e.parent&&Ae(e.parent.queues,e,u),Ae(a,e,u)}))}a.length>1&&"group"===a[1].type&&!0===a[1].isRoot&&(a[1].isComplete=!0);var Ne=[],je="";a.every((function(e){if(!e.isComplete)throw new Error("the regexp segment "+e.type+" is not completed:"+e.input);return null===e.parent&&(Ne.push(e),je+=e.getRuleInput()),!0})),this.ruleInput=je,this.rootQueues=Ne,this.queues=a},e.prototype.checkFlags=function(){var e,t=this.flags,r=t.length;if(0!==r){if(r>Object.keys(g).length)throw new Error("The rule may has repeated or unrecognized flags<got '"+t.join("")+"'>, please check.");for(var n=t[0],i=g[n],o=((e={})[n]=!0,e),u=1,a=t.length;u<a;u++){var s=t[u],p=g[s];if(0!=(i&p))throw new Error("wrong flag["+u+"]:"+s);i+=p,o[s]=!0}this.flagsHash=o,this.totalFlagBinary=i,(o.y||o.m||o.g)&&console.warn("the flags of 'g','m','y' will ignore,but you can set flags such as 'i','u','s'")}},e.prototype.hasFlag=function(e){var t=this.totalFlagBinary,r=g[e];return r&&0!=(r&t)},e.prototype.getFlagsHash=function(){return this.flagsHash},e.maxRepeat=5,e}();t.default=m;var R=function(){function e(e){void 0===e&&(e=""),this.input=e,this.queues=[],this.codePoint=-1,this.min=1,this.max=1,this.dataConf={},this.buildForTimes=!1,this.curParent=null,this.matchNothing=!1,this.completed=!0}return Object.defineProperty(e.prototype,"parser",{get:function(){return this.parserInstance},set:function(e){this.parserInstance=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.getCodePointCount()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.curParent},set:function(e){this.curParent=e,"special"!==this.type&&e.add(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkParent",{set:function(e){this.curParent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMatchNothing",{get:function(){return this.matchNothing},set:function(e){this.matchNothing=e,this.parent&&(this.parent.isMatchNothing=e)},enumerable:!1,configurable:!0}),e.prototype.setRange=function(e){var t=this;Object.keys(e).forEach((function(r){t[r]=e[r]}))},e.prototype.add=function(e){this.queues=this.queues.concat(e)},e.prototype.pop=function(){return this.queues.pop()},e.prototype.build=function(e){var t=this,r=this.min,n=this.max,i="";if(0===r&&0===n);else{var o=r+Math.floor(Math.random()*(n-r+1));if(0!==o){var u=function(){var r=t.prebuild(e);return e.flags&&e.flags.i&&(r=a()?a()?r.toLowerCase():r.toUpperCase():r),r};if(this.buildForTimes)for(;o--;)i+=u();else i=u().repeat(o)}}return this.dataConf=e,this.setDataConf(e,i),i},e.prototype.untilEnd=function(e){},e.prototype.setDataConf=function(e,t){},e.prototype.isAncestorOf=function(e){do{if(e===this)return!0}while(e=null==e?void 0:e.parent);return!1},e.prototype.getRuleInput=function(e){return this.queues.length?this.buildRuleInputFromQueues():this.input},e.prototype.buildRuleInputFromQueues=function(){return this.queues.reduce((function(e,t){return e+t.getRuleInput()}),"")},e.prototype.prebuild=function(e){return this.queues.length?this.queues.reduce((function(t,r){return t+r.build(e)}),""):""},e.prototype.getCodePointCount=function(){return 1},e}();t.RegexpPart=R;var x=function(e){function t(t){var r=e.call(this,t)||this;return r.min=0,r.max=0,r}return i(t,e),t}(R);t.RegexpEmpty=x;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.prebuild=function(){return this.input},t}(R);t.RegexpOrigin=b;var w=function(e){function t(t,r){void 0===r&&(r="");var n=e.call(this,t)||this;return n.name=r,n.type="reference",n.ref=null,n.index=Number(""+t.slice(1)),n}return i(t,e),t.prototype.prebuild=function(e){var t=this.ref;if(null===t)return"";var r=t.captureIndex,n=e.captureGroupData;return n.hasOwnProperty(r)?n[r]:""},t}(R);t.RegexpReference=w;var C=function(e){function t(t){var r=e.call(this)||this;return r.special=t,r.type="special",r}return i(t,e),t}(x);t.RegexpSpecial=C;var E=function(e){function t(t){var r=e.call(this)||this;return r.type="lookaround",r.looktype=t,r.isComplete=!1,r}return i(t,e),t.prototype.getRuleInput=function(){return"("+this.looktype+this.buildRuleInputFromQueues()+")"},t}(x);t.RegexpLookaround=E;var P=function(e){function t(){var t=e.call(this,".")||this;return t.type="any",t.buildForTimes=!0,t}return i(t,e),t.prototype.prebuild=function(e){return h.make(".",e.flags)},t}(R);t.RegexpAny=P;var I=function(e){function t(){var t=e.call(this,"\\0")||this;return t.type="null",t}return i(t,e),t.prototype.prebuild=function(){return"\0"},t}(R);t.RegexpNull=I;var O=function(e){function t(){var t=e.call(this,"[\\b]")||this;return t.type="backspace",t}return i(t,e),t.prototype.prebuild=function(){return"\b"},t}(R);t.RegexpBackspace=O;var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="begin",t}return i(t,e),t}(x);t.RegexpBegin=A;var k=function(e){function t(t){var r=e.call(this,"\\c"+t)||this;return r.type="control",r.codePoint=parseInt(t.charCodeAt(0).toString(2).slice(-5),2),r}return i(t,e),t.prototype.prebuild=function(){return String.fromCharCode(this.codePoint)},t}(R);t.RegexpControl=k;var N=function(e){function t(t){var r=e.call(this,t)||this;return r.type="charset",r.charset=r.input.slice(-1),r.buildForTimes=!0,r}return i(t,e),t.prototype.prebuild=function(e){var t=this.charset;return"b"===t||"B"===t?(console.warn("The  \\b or \\B"),""):h.make(t,e.flags)},t.prototype.getCodePointCount=function(){var e=this.parser,t=this.charset,r=h.getCharsetInfo(t,e.getFlagsHash()).totals;return l(r)},t}(R);t.RegexpCharset=N;var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="print",t}return i(t,e),t.prototype.prebuild=function(){return new Function("","return '"+this.input+"'")()},t}(R);t.RegexpPrint=j;var q=function(e){function t(t){var r=e.call(this,t)||this;return r.type="anchor",r.anchor=t,console.warn('the anchor of "'+r.input+'" will ignore.'),r}return i(t,e),t}(x);t.RegexpAnchor=q;var S=function(e){function t(t){var r=e.call(this,t)||this;return r.type="char",r.codePoint=t.codePointAt(0),r}return i(t,e),t}(b);t.RegexpChar=S;var F=function(e){function t(t){var r=e.call(this,t)||this;return r.type="translate",r.codePoint=t.slice(-1).codePointAt(0),r}return i(t,e),t.prototype.prebuild=function(){return this.input.slice(-1)},t}(b);t.RegexpTranslateChar=F;var $=function(e){function t(t){var r=e.call(this,t)||this;return r.type="octal",r.codePoint=Number("0o"+t.slice(1)),r}return i(t,e),t.prototype.prebuild=function(){return String.fromCodePoint(this.codePoint)},t}(R);t.RegexpOctal=$;var _=function(e){function t(t){var r=e.call(this,t)||this;return r.type="refornumber",r}return i(t,e),t.prototype.prebuild=function(){throw new Error('the "'+this.input+'" must parse again,either reference or number')},t}(R);t.RegexpRefOrNumber=_;var T=function(e){function t(){var t=e.call(this)||this;return t.type="times",t.maxNum=m.maxRepeat,t.greedy=!0,t.minRepeat=0,t.maxRepeat=0,t.isComplete=!1,t}return i(t,e),Object.defineProperty(t.prototype,"target",{set:function(e){e.setRange({min:this.minRepeat,max:this.maxRepeat})},enumerable:!1,configurable:!0}),t.prototype.untilEnd=function(e){if(this.rule.test(e)){var t=RegExp.$1;return this.isComplete=!0,this.input=t,this.parse(),t.length}return 0},t}(R);t.RegexpTimes=T;var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^(\{(\d+)(,(\d*))?}(\??))/,t}return i(t,e),t.prototype.parse=function(){var e=RegExp.$2,t=RegExp.$3,r=RegExp.$4,n=RegExp.$5;if(this.greedy="?"!==n,this.minRepeat=parseInt(e,10),this.maxRepeat=Number(r)?parseInt(r,10):t?this.minRepeat+2*this.maxNum:this.minRepeat,this.maxRepeat<this.minRepeat)throw new Error("wrong quantifier: {"+this.minRepeat+", "+this.maxRepeat+"}")},t}(T);t.RegexpTimesMulti=M;var B=function(e){function t(t){void 0===t&&(t=m.maxRepeat);var r=e.call(this)||this;return r.maxNum=t,r.rule=/^(\*\?|\+\?|\?\?|\*|\+|\?)/,r}return i(t,e),t.prototype.parse=function(){var e=RegExp.$1;switch(this.greedy=1===e.length,e.charAt(0)){case"*":this.maxRepeat=this.maxNum;break;case"+":this.minRepeat=1,this.maxRepeat=this.maxNum;break;case"?":this.maxRepeat=1}},t}(T);t.RegexpTimesQuantifiers=B;var G=function(e){function t(){var t=e.call(this)||this;return t.type="set",t.reverse=!1,t.isMatchAnything=!1,t.codePointResult=null,t.isComplete=!1,t.buildForTimes=!0,t}return i(t,e),Object.defineProperty(t.prototype,"parser",{get:function(){return this.parserInstance},set:function(e){this.parserInstance=e,this.makeCodePointResult()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.completed},set:function(e){(this.completed=e,!0===e)&&(0===this.queues.length?this.reverse?this.isMatchAnything=!0:this.isMatchNothing=!0:this.makeCodePointResult())},enumerable:!1,configurable:!0}),t.prototype.getRuleInput=function(){return"["+(this.reverse?"^":"")+this.buildRuleInputFromQueues()+"]"},t.prototype.prebuild=function(e){if(this.isMatchAnything)return(new P).build(e);var t,r=this.queues;if(this.reverse)return h.makeOne(this.codePointResult);if(e.extractSetAverage){var n=0,i=r.map((function(e){return n+=e.count}));t=p(i).index}else t=s(0,r.length-1);return this.queues[t].build(e)},t.prototype.makeCodePointResult=function(){if(this.reverse&&this.parser&&this.isComplete){var e=this.queues,t=this.parser.getFlagsHash();if(1===e.length&&"charset"===e[0].type&&["w","s","d"].includes(e[0].charset.toLowerCase())){var r=32^e[0].charset.charCodeAt(0),n=String.fromCharCode(r);this.codePointResult=h.getCharsetInfo(n,t)}else{var i=e.reduce((function(e,r){var n,i=r.type;if("charset"===i){var o=r.charset;"b"===o||"B"===o?(console.warn("the charset \\b or \\B will ignore"),n=[]):n=h.getCharsetInfo(o,t).ranges.slice(0)}else n="range"===i?[r.queues.map((function(e){return e.codePoint}))]:[[r.codePoint]];return e.concat(n)}),[]);i.push([55296,57343],t.u?[1114112]:[65536]),i.sort((function(e,t){return t[0]>e[0]?-1:t[0]===e[0]?t[1]>e[1]?1:-1:1}));for(var o=[],u=0,a=0,s=i.length;a<s;a++){var p=i[a],l=p[0],c=p[1]||l;u<l&&o.push(u+1===l?[u]:[u,l-1]),u=Math.max(c+1,u)}if(0===o.length)this.isMatchNothing=!0;else{var f=0,g=o.map((function(e){return 1===e.length?f+=1:f+=e[1]-e[0]+1,f}));this.codePointResult={totals:g,ranges:o}}}}},t}(R);t.RegexpSet=G;var L=function(e){function t(){var t=e.call(this)||this;return t.type="range",t.isComplete=!1,t}return i(t,e),t.prototype.add=function(t){if(e.prototype.add.call(this,t),2===this.queues.length){this.isComplete=!0;var r=this.queues,n=r[0],i=r[1];if(n.codePoint>i.codePoint)throw new Error("invalid range:"+n.getRuleInput()+"-"+i.getRuleInput())}},t.prototype.getRuleInput=function(){var e=this.queues,t=e[0],r=e[1];return t.getRuleInput()+"-"+r.getRuleInput()},t.prototype.prebuild=function(){var e=this.queues,t=e[0],r=e[1],n=t.codePoint,i=r.codePoint;return String.fromCodePoint(s(n,i))},t.prototype.getCodePointCount=function(){var e=this.queues,t=e[0],r=e[1],n=t.codePoint;return r.codePoint-n+1},t}(R);t.RegexpRange=L;var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="hexcode",t}return i(t,e),t.prototype.untilEnd=function(e){var t=this.rule,r=this.codeType;if(t.test(e)){var n=RegExp.$1,i=RegExp.$2||n;if(this.codePoint=Number("0x"+i),this.codePoint>1114111)throw new Error("invalid unicode code point:\\u{"+i+"},can not great than 0x10ffff");return this.input="\\"+r+n,n.length}return 0},t}(b);t.RegexpHexCode=D;var H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^([0-9A-Fa-f]{4})/,t.codeType="u",t}return i(t,e),t}(D);t.RegexpUnicode=H;var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^({(0*[0-9A-Fa-f]{1,6})}|[0-9A-Fa-f]{4})/,t.codeType="u",t}return i(t,e),t}(D);t.RegexpUnicodeAll=U;var Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rule=/^([0-9A-Fa-f]{2})/,t.codeType="x",t}return i(t,e),t}(D);t.RegexpASCII=Q;var z=function(e){function t(t){var r=e.call(this)||this;return r.symbol=t,r.type="unicode-category",r.rule=/^([A-Z]|\{(?:(?:([a-zA-Z_]+)=)?([A-Za-z_]+))})/,r}return i(t,e),t.prototype.untilEnd=function(e){if(this.rule.test(e)){var t=RegExp.$1,r=RegExp.$2,n=RegExp.$3,i=this.symbol,o="P"===i,u=void 0;n?(u={short:!1,negate:o,value:n},r&&(u.key=r)):u={short:!0,negate:o,value:t},this.data=u;var a=m.UPCFactory;return this.generator=a(u),this.input="\\"+i+t,t.length}return 0},t.prototype.prebuild=function(){return this.generator.generate()},t}(R);t.RegexpUnicodeCategory=z;var W=function(e){function t(t){var r=e.call(this)||this;return r.index=t,r.type="group-item",r}return i(t,e),t.prototype.getRuleInput=function(e){var t=this;return void 0===e&&(e=!1),this.queues.reduce((function(r,n){return r+(e&&"reference"===n.type&&null!==n.ref?n.ref.getRuleInput(e):t.isEndLimitChar(n)?"":n.getRuleInput(e))}),"")},t.prototype.prebuild=function(e){var t=this;return this.queues.reduce((function(r,n){var i;return t.isEndLimitChar(n)?(console.warn("the ^ and $ of the regexp will ignore"),i=""):i=n.build(e),r+i}),"")},t.prototype.isEndLimitChar=function(e){return"anchor"===e.type},t}(R);t.RegexpGroupItem=W;var Z=function(e){function t(){var t=e.call(this)||this;return t.type="group",t.captureIndex=0,t.captureName="",t.queues=[],t.isRoot=!1,t.curGroupItem=null,t.curRule=null,t.isComplete=!1,t.buildForTimes=!0,t.addNewGroup(),t}return i(t,e),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.completed},set:function(e){this.completed=e,!0===e&&(this.isMatchNothing=this.queues.every((function(e){return e.isMatchNothing})))},enumerable:!1,configurable:!0}),t.prototype.addNewGroup=function(){var e=this.queues,t=new W(e.length);return this.curGroupItem=t,t.parent=this,t},t.prototype.addRootItem=function(e){var t=this;e.map((function(e){null===e.parent&&(e.parent=t.curGroupItem)})),this.addNewGroup()},t.prototype.addItem=function(e){e.parent=this.curGroupItem},t.prototype.getRuleInput=function(e){void 0===e&&(e=!1);var t=this.queues,r=this.captureIndex,n=this.isRoot,i="";return 0!==r||n||(i="?:"+i),i+=t.map((function(t){return t.getRuleInput(e)})).join("|"),n?i:"("+i+")"},t.prototype.buildRule=function(e){if(this.curRule)return this.curRule;var t=this.getRuleInput(!0),r=Object.keys(e).join("");return this.curRule=new Function("","return /^"+t+"$/"+r)()},t.prototype.prebuild=function(e){var t,r=this.queues,n=this.captureIndex,i=this.captureName,o="",u=e.flags,a=e.namedGroupConf,p=r.length,l=[],c=[],h=[],f=[];if(i&&i.includes("_")&&a){var g=i.split("_");if(g.length===p){var d=!1;if("object"==typeof a[i]){var v=a[i];g.forEach((function(e,t){if("boolean"==typeof v[e]&&!1===v[e]);else{d=!0;var n=r[t];Array.isArray(v[e])?(c.push(n),h.push(v[e])):l.push(n)}}))}if(!d)throw new Error("the specified named group '"+i+"' are all filtered by the config.");var y=c.length;y&&(x=s(0,y+l.length-1))<y&&(t=c[x],f=h[x])}}if(i&&a&&a[i]&&(Array.isArray(a[i])||t)){var m=void 0,R=void 0;if(t?(m=f,R=this.buildRule.call(t,u)):(m=a[i],R=this.buildRule(u)),o=m[x=s(0,m.length-1)],!R.test(o))throw new Error("the namedGroupConf of "+i+"'s value \""+o+'" is not match the rule '+R.toString())}else{var x,b=l.length?l:r;o=b[x=s(0,b.length-1)].build(e)}return i&&(e.namedGroupData[i]=o),n&&(e.captureGroupData[n]=o),o},t}(R);t.RegexpGroup=Z}]);